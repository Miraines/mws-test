# üê± Cats Service ‚Äî –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Go + **ogen** –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –≤ MWS

> –ú–∏–Ω–∏-–ø—Ä–æ–µ–∫—Ç –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º Go-–∫–æ–¥–∞ –∏–∑ OpenAPI-—Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π 
**[ogen-go/ogen](https://github.com/ogen-go/ogen)**.  
> –°–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç —Å—É—â–Ω–æ—Å—Ç—è–º–∏ `Cat` –≤ –ø–∞–º—è—Ç–∏, –∏–º–µ–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ª–æ–π HTTP-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç/–∫–ª–∏–µ–Ω—Ç –∏ –ø–æ–∫—Ä—ã—Ç
> –º–æ–¥—É–ª—å–Ω—ã–º–∏ —Ç–µ—Å—Ç–∞–º–∏.

---

## üìë –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è](#–∏—Å—Ö–æ–¥–Ω—ã–π-—Ç–µ–∫—Å—Ç-–∑–∞–¥–∞–Ω–∏—è)
- [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞)
    - [–î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤](#–¥–∏–∞–≥—Ä–∞–º–º–∞-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤)
- [API](#api)
- [–ó–∞–ø—É—Å–∫](#–∑–∞–ø—É—Å–∫)
    - [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
    - [Makefile —Ü–µ–ª–∏](#makefile-—Ü–µ–ª–∏)
- [–¢–µ—Å—Ç—ã](#—Ç–µ—Å—Ç—ã)

---

## –û –ø—Ä–æ–µ–∫—Ç–µ

–ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî –ø–æ–∫–∞–∑–∞—Ç—å, –∫–∞–∫ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å **–∫–ª–∏–µ–Ω—Ç** –∏ **—Å–µ—Ä–≤–µ—Ä–Ω—ã–µ —Ö–µ–Ω–¥–ª–µ—Ä—ã** –∏–∑ OpenAPI 3.0 –ø—Ä–∏ –ø–æ–º–æ—â–∏ `ogen`, –∞ –∑–∞—Ç–µ–º
—Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–≤–æ—é –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫—É –∏ in-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ

–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

| –ß—Ç–æ                | –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ                                                                                                                                                 |
|--------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **OpenAPI**        | Yaml —Ñ–∞–π–ª `openapi/openapi.yaml` –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ä–µ—Å—É—Ä—Å—ã `Cat`, `NewCat`, `UpdateCat` –∏ CRUD-—ç–Ω–¥–ø–æ–∏–Ω—Ç—ã.                                                               |
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è**      | `make generate` –≤—ã–∑—ã–≤–∞–µ—Ç `ogen` –∏ –ø–æ–º–µ—â–∞–µ—Ç –∫–æ–¥ –≤ `internal/api`. –í –∫–∞–∂–¥—ã–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –ø—Ä–æ—Ä–æ—Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∏–∑ OpenAPI `description` (—Å–º. –∑–∞–¥–∞–Ω–∏–µ –Ω–∏–∂–µ). |
| **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** | `internal/service` —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–æ–≥–∏–∫—É `CatService`, —Ä–∞–∑–¥–µ–ª—è—é—â—É—é API –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ.                                                                                   |
| **–•—Ä–∞–Ω–∏–ª–∏—â–µ**      | `internal/store` ‚Äî –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π `MemoryStore` (map + RWMutex)                                                                                               |
| **CLI-–∫–ª–∏–µ–Ω—Ç**     | `cmd/client/main.go` ‚Äî –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞.                                                                                           |
| **HTTP-—Å–µ—Ä–≤–µ—Ä**    | `cmd/server/main.go` —Å—Ç–∞—Ä—Ç—É–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `http.Handler`.                                                                                                   |
| **–¢–µ—Å—Ç—ã**          | `*_test.go` –Ω–∞ store –∏ service, –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É—é—Ç CRUD —Å—Ü–µ–Ω–∞—Ä–∏–∏.                                                                                                    |

---

## –ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è

<details>
<summary>–°–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—Å—Ç –∑–∞–¥–∞–Ω–∏—è</summary>

–ì–µ–Ω–µ—Ä–∞—Ü–∏—è golang –∫–æ–¥–∞ —Å –ø–æ–º–æ—â—å—é ogen

**–ó–∞–¥–∞—á–∞:**  
–†–∞–∑–æ–±—Ä–∞—Ç—å—Å—è –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ golang –∫–æ–¥–∞ –ø–æ OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî Ogen (https://github.com/ogen-go/ogen).  
–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π openapi —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–µ–π –∫ –∫–∞–∂–¥–æ–º—É –º–µ—Ç–æ–¥—É. –ù—É–∂–Ω–æ
–ø–æ–Ω—è—Ç—å —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤ –∫–∞–∫–æ–µ –ø–æ–ª–µ –º–µ—Ç–æ–¥–∞ openapi –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π, —á—Ç–æ–±—ã –æ–Ω–æ –ø—Ä–æ—Ä–æ—Å–ª–æ –≤ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫
—Å–≥–µ–Ω–µ—Ä–µ–Ω–Ω–æ–º—É handle –º–µ—Ç–æ–¥—É ogen. **–†–∞—Å—à–∏—Ä—è—Ç—å —Å–∞–º ogen –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ –Ω—É–∂–Ω–æ.**

–í –∫–∞—á–µ—Å—Ç–≤–µ OAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–∞–º–æ–ø–∏—Å–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é, –≥–¥–µ –æ–ø–∏—Å–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç —Å –æ–¥–Ω–æ–π —Å—Ö–µ–º–æ–π
—Ä–µ—Å—É—Ä—Å–æ–º (—Å—É—â–Ω–æ—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π) –∏ CRUD –º–µ—Ç–æ–¥–∞–º–∏ –¥–ª—è –Ω–µ–µ. –ò–º–ø–ª–µ–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫—É—é –∏ —Å–µ—Ä–≤–µ—Ä–Ω—É—é –ª–æ–≥–∏–∫—É. –•—Ä–∞–Ω–∏–º
–¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ in-memory.

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**

- –≤ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –∫–æ–¥–µ —É –∫–∞–∂–¥–æ–≥–æ –º–µ—Ç–æ–¥–∞ –µ—Å—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º —ç—Ç–æ–≥–æ –º–µ—Ç–æ–¥–∞ –Ω–∞ OpenAPI,
- –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏ —Å—Ö–æ–¥–∏—Ç—å –≤ –Ω–µ–≥–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º.

</details>

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –î–∏–∞–≥—Ä–∞–º–º–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```mermaid
graph TD
    subgraph Client Side
        CLI["CLI –ø—Ä–∏–º–µ—Ä<br>(api.NewClient)"]
    end

    subgraph Server Side
        HTTPServer["–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π<br>HTTP-—Å–µ—Ä–≤–µ—Ä"]
        Service["CatService<br>(–±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)"]
        Store["MemoryStore"]
    end

    CLI -->|HTTP JSON| HTTPServer
    HTTPServer --> Service
    Service --> Store
```

## API

- –ü–æ–ª–Ω–∞—è —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `openapi/openapi.yaml`.
- –ü—Ä–∏–º–µ—Ä —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

  | –ú–µ—Ç–æ–¥    | –ü—É—Ç—å         | –û–ø–∏—Å–∞–Ω–∏–µ              |
    | -------- | ------------ |-----------------------|
  | `GET`    | `/cats`      | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–æ—Ç–∏–∫–æ–≤   |
  | `POST`   | `/cats`      | –°–æ–∑–¥–∞—Ç—å –∫–æ—Ç–∏–∫–∞        |
  | `GET`    | `/cats/{id}` | –ü–æ–ª—É—á–∏—Ç—å –∫–æ—Ç–∏–∫–∞ –ø–æ ID |
  | `PUT`    | `/cats/{id}` | –û–±–Ω–æ–≤–∏—Ç—å –∫–æ—Ç–∏–∫–∞       |
  | `DELETE` | `/cats/{id}` | –£–¥–∞–ª–∏—Ç—å  –∫–æ—Ç–∏–∫–∞       |

## –ó–∞–ø—É—Å–∫

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```bash
# 1. –ö–ª–æ–Ω–∏—Ä—É–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/Miraines/mws-test.git
cd mws-test

# 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–¥ –∏ –ø–æ–¥—Ç—è–≥–∏–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
make generate tidy

# 3. –ó–∞–ø—É—Å–∫–∞–µ–º —Å–µ—Ä–≤–µ—Ä
go run ./cmd/server
# –°–µ—Ä–≤–µ—Ä —Å–ª—É—à–∞–µ—Ç :8000

# 4. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –∑–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–º–µ—Ä –∫–ª–∏–µ–Ω—Ç–∞
go run ./cmd/client
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞:**

```
–°–æ–∑–¥–∞–ª–∏: &{ID:1 Name:–ë–∞—Ä—Å–∏–∫ Age:3 Color:—Ä—ã–∂–∏–π}
List -> [{ID:1 Name:–ë–∞—Ä—Å–∏–∫ Age:3 Color:—Ä—ã–∂–∏–π}]
–û–±–Ω–æ–≤–∏–ª–∏: &{ID:1 Name:–ë–∞—Ä—Å–∏–∫ II Age:4 Color:–±–µ–ª—ã–π}
After update -> [{ID:1 Name:–ë–∞—Ä—Å–∏–∫ II Age:4 Color:–±–µ–ª—ã–π}]
–£–¥–∞–ª–∏–ª–∏ –∫–æ—Ç–∏–∫–∞ (204)
```

### Makefile —Ü–µ–ª–∏

| –¶–µ–ª—å            | –ö–æ–º–∞–Ω–¥–∞                          | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç                                             |
|-----------------|----------------------------------|--------------------------------------------------------|
| `make generate` | `ogen --target internal/api ...` | –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ `internal/api` |
| `make tidy`     | `go mod tidy`                    | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç `go.mod`                                |
| `make fmt`      | `go fmt ./...`                   | –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ—Ç –∫–æ–¥                                        |
| `make clean`    | `rmdir`                          | –£–¥–∞–ª—è–µ—Ç `internal/api`                                 |


## –¢–µ—Å—Ç—ã

**–ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—Å–∫–∞:**

```bash
go test ./...
```

–ü–æ–∫—Ä—ã–≤–∞—é—Ç—Å—è –¥–≤–∞ —É—Ä–æ–≤–Ω—è:
- MemoryStore ‚Äî atomic CRUD –ø–æ–≤–µ–¥–µ–Ω–∏–µ, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ñ–ª–∞–≥–æ–≤ ok.
- CatService ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (200/404/204), –º–∞–ø–ø–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä, –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ ID.

<p align="center"><sub>¬© 2025 Miraines ‚Ä¢ MIT License</sub></p>
